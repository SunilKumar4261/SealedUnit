<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Glass Calculator - UK</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .tab-active {
            background-color: #2563eb;
            color: white;
        }
        .shape-option {
            transition: all 0.3s ease;
        }
        .shape-option:hover {
            transform: scale(1.05);
        }
        .shape-selected {
            border: 3px solid #2563eb;
            background-color: #eff6ff;
        }
        .price-display {
            background: linear-gradient(135deg, #1e40af, #3b82f6);
            color: white;
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }
        .form-section {
            background: white;
            border-radius: 12px;
            padding: 16px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
            margin-bottom: 16px;
        }
        @media (min-width: 640px) {
            .form-section {
                padding: 24px;
                margin-bottom: 20px;
            }
        }
        .input-field {
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            padding: 12px;
            transition: border-color 0.3s ease;
        }
        .input-field:focus {
            border-color: #2563eb;
            outline: none;
        }
        .btn-primary {
            background: linear-gradient(135deg, #2563eb, #3b82f6);
            color: white;
            padding: 12px 24px;
            border-radius: 8px;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(37, 99, 235, 0.3);
        }
        .error-message {
            color: #dc2626;
            font-size: 14px;
            margin-top: 5px;
        }
        .cart-item {
            background: white;
            border: 1px solid #e2e8f0;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 16px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            transition: all 0.3s ease;
        }
        .cart-item:hover {
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            transform: translateY(-2px);
        }
        .quantity-controls {
            display: flex;
            align-items: center;
            gap: 8px;
            background: #f8fafc;
            border-radius: 8px;
            padding: 4px;
        }
        .quantity-btn {
            width: 32px;
            height: 32px;
            border: none;
            background: #2563eb;
            color: white;
            border-radius: 6px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            transition: all 0.2s ease;
        }
        .quantity-btn:hover {
            background: #1d4ed8;
            transform: scale(1.1);
        }
        .quantity-btn:disabled {
            background: #9ca3af;
            cursor: not-allowed;
            transform: none;
        }
        .quantity-display {
            min-width: 40px;
            text-align: center;
            font-weight: 600;
            color: #374151;
        }
        .cart-header {
            background: linear-gradient(135deg, #1e40af, #3b82f6);
            color: white;
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 20px;
            text-align: center;
        }
        .cart-empty {
            text-align: center;
            padding: 40px 20px;
            color: #6b7280;
        }
        .cart-empty svg {
            width: 64px;
            height: 64px;
            margin: 0 auto 16px;
            opacity: 0.5;
        }
        .success-popup {
            position: fixed;
            top: 20px;
            right: 20px;
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
            padding: 16px 24px;
            border-radius: 12px;
            box-shadow: 0 10px 25px rgba(16, 185, 129, 0.3);
            z-index: 1001;
            transform: translateX(400px);
            opacity: 0;
            transition: all 0.4s ease;
            max-width: 350px;
        }
        .success-popup.show {
            transform: translateX(0);
            opacity: 1;
        }
        .success-popup .popup-content {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        .success-popup .popup-icon {
            width: 24px;
            height: 24px;
            flex-shrink: 0;
        }
        .success-popup .popup-text {
            flex: 1;
        }
        .success-popup .popup-title {
            font-weight: 600;
            font-size: 16px;
            margin-bottom: 4px;
        }
        .success-popup .popup-message {
            font-size: 14px;
            opacity: 0.9;
        }
        .shape-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }
        .shape-modal-content {
            background: white;
            border-radius: 12px;
            padding: 24px;
            max-width: 600px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <nav class="bg-white shadow-md sticky top-0 z-50">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <div class="flex items-center">
                    <a href="final.html" class="flex-shrink-0 font-bold text-xl text-blue-600">GlassCo</a>
                    <div class="hidden md:block">
                        <div class="ml-10 flex items-baseline space-x-4">
                            <a href="final.html" class="bg-blue-600 text-white px-3 py-2 rounded-md text-sm font-medium">Products</a>
                        </div>
                    </div>
                </div>
                <div class="flex items-center">
                    <a href="cart.html" class="relative p-2 rounded-full text-gray-600 hover:bg-gray-100 hover:text-gray-800">
                        <svg class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z" />
                        </svg>
                        <span id="navCartCount" class="absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center">0</span>
                    </a>
                </div>
            </div>
        </div>
    </nav>
    <div class="container mx-auto px-4 sm:px-6 lg:px-8 py-6 lg:py-8 max-w-7xl">
        <header class="text-center mb-6 lg:mb-8">
            <h1 class="text-2xl sm:text-3xl lg:text-4xl font-bold text-gray-800 mb-2">Glass Calculator</h1>
            <p class="text-sm sm:text-base text-gray-600">Professional glazing solutions for the UK market</p>
        </header>

        <!-- Tab Navigation -->
        <div class="flex justify-center mb-6 lg:mb-8">
            <div class="bg-white rounded-lg p-1 sm:p-2 shadow-lg w-full max-w-8xl">
                <div class="flex flex-col sm:flex-row gap-1 sm:gap-2 justify-center">
                    <button id="singleTab" class="tab-btn tab-active px-3 sm:px-6 py-3 sm:py-4 rounded-lg font-semibold transition-all duration-300 text-sm sm:text-base flex flex-col items-center gap-2">
                        <img src="/views/single unit.jpeg" alt="Single Unit" class="w-10 h-10">
                        <span>Single Unit</span>
                    </button>
                    <button id="doubleTab" class="tab-btn px-3 sm:px-6 py-3 sm:py-4 rounded-lg font-semibold transition-all duration-300 text-sm sm:text-base flex flex-col items-center gap-2">
                        <img src="/views/double.jpeg" alt="double glazed" class="w-10 h-10">
                        <span>Double Glazed</span>
                    </button>
                    <button id="tripleTab" class="tab-btn px-3 sm:px-6 py-3 sm:py-4 rounded-lg font-semibold transition-all duration-300 text-sm sm:text-base flex flex-col items-center gap-2">
                        <img src="/views/triple.jpeg" alt="triple glazed" class="w-10 h-10">
                        <span>Triple Glazed</span>
                    </button>
                </div>
            </div>
        </div>

        <div class="grid grid-cols-1 xl:grid-cols-2 gap-6 lg:gap-8">
            <!-- Calculator Form -->
            <div class="xl:col-span-2">
                <!-- Single Unit Tab -->
                <div id="singleUnit" class="tab-content">
                    <!-- Step 1: Glass Configuration -->
                    <div class="form-section">
                        <div class="flex items-center justify-between mb-4">
                            <!-- Left section: number + title -->
                            <div class="flex items-center">
                                <div class="w-8 h-8 bg-blue-600 text-white rounded-full flex items-center justify-center font-bold mr-3">
                                    1
                                </div>
                                <h3 class="text-xl font-semibold text-gray-800">Glass Configuration</h3>
                            </div>

                            <!-- Right section: image -->
                            <img src="/views/single unit.jpeg" alt="Single Unit" class="w-10 h-10">
                        </div>
                        
                        <div class="mb-6">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Glass Thickness *</label>
                            <select id="singleGlassThickness" class="input-field w-full" required onchange="showSingleGlassTypes()">
                                <option value="">Select Glass Thickness</option>
                                <option value="4mm">4mm</option>
                                <option value="6mm">6mm</option>
                                <option value="8mm">8mm</option>
                                <option value="10mm">10mm</option>
                            </select>
                            <div id="singleGlassThicknessError" class="error-message hidden">Please select glass thickness</div>
                        </div>

                        <!-- Glass Type Sub-Options -->
                        <div id="singleGlassTypeContainer" class="mb-6 hidden">
                            <label class="block text-sm font-medium text-gray-700 mb-3">Glass Type *</label>
                            <div class="grid grid-cols-2 sm:grid-cols-3 gap-4">
                                <label class="cursor-pointer">
                                    <input type="radio" name="singleGlassType" value="clear" class="sr-only" onchange="handleSingleGlassTypeChange()">
                                    <div class="glass-type-option border-2 border-gray-200 rounded-lg p-4 text-center hover:border-blue-400 transition-all">
                                        <div class="w-16 h-16 bg-gray-100 rounded-lg mx-auto mb-2 flex items-center justify-center">
                                            <span class="text-2xl">🔲</span>
                                        </div>
                                        <p class="text-sm font-medium">Clear Glass</p>
                                    </div>
                                </label>
                                <label class="cursor-pointer">
                                    <input type="radio" name="singleGlassType" value="low-iron" class="sr-only" onchange="handleSingleGlassTypeChange()">
                                    <div class="glass-type-option border-2 border-gray-200 rounded-lg p-4 text-center hover:border-blue-400 transition-all">
                                        <div class="w-16 h-16 bg-blue-50 rounded-lg mx-auto mb-2 flex items-center justify-center">
                                            <span class="text-2xl">💎</span>
                                        </div>
                                        <p class="text-sm font-medium">Low-Iron Glass</p>
                                    </div>
                                </label>
                                <label class="cursor-pointer">
                                    <input type="radio" name="singleGlassType" value="satin" class="sr-only" onchange="handleSingleGlassTypeChange()">
                                    <div class="glass-type-option border-2 border-gray-200 rounded-lg p-4 text-center hover:border-blue-400 transition-all">
                                        <div class="w-16 h-16 bg-gray-200 rounded-lg mx-auto mb-2 flex items-center justify-center">
                                            <span class="text-2xl">⬜</span>
                                        </div>
                                        <p class="text-sm font-medium">Satin Glass</p>
                                    </div>
                                </label>
                                <label class="cursor-pointer">
                                    <input type="radio" name="singleGlassType" value="tinted" class="sr-only" onchange="handleSingleGlassTypeChange()">
                                    <div class="glass-type-option border-2 border-gray-200 rounded-lg p-4 text-center hover:border-blue-400 transition-all">
                                        <div class="w-16 h-16 bg-amber-100 rounded-lg mx-auto mb-2 flex items-center justify-center">
                                            <span class="text-2xl">🟫</span>
                                        </div>
                                        <p class="text-sm font-medium">Tinted Glass</p>
                                    </div>
                                </label>
                                <label class="cursor-pointer">
                                    <input type="radio" name="singleGlassType" value="black" class="sr-only" onchange="handleSingleGlassTypeChange()">
                                    <div class="glass-type-option border-2 border-gray-200 rounded-lg p-4 text-center hover:border-blue-400 transition-all">
                                        <div class="w-16 h-16 bg-black rounded-lg mx-auto mb-2 flex items-center justify-center">
                                            <span class="text-2xl text-white">⬛</span>
                                        </div>
                                        <p class="text-sm font-medium">Black Glass</p>
                                    </div>
                                </label>
                                <label class="cursor-pointer">
                                    <input type="radio" name="singleGlassType" value="painted" class="sr-only" onchange="handleSingleGlassTypeChange()">
                                    <div class="glass-type-option border-2 border-gray-200 rounded-lg p-4 text-center hover:border-blue-400 transition-all">
                                        <div class="w-16 h-16 bg-gradient-to-r from-red-200 to-blue-200 rounded-lg mx-auto mb-2 flex items-center justify-center">
                                            <span class="text-2xl">🎨</span>
                                        </div>
                                        <p class="text-sm font-medium">Painted Glass</p>
                                    </div>
                                </label>
                            </div>
                            <div id="singleGlassTypeError" class="error-message hidden">Please select a glass type</div>
                        </div>

                        <!-- Painted Glass Color Options -->
                        <div id="singlePaintedOptions" class="mb-6 hidden">
                            <label class="block text-sm font-medium text-gray-700 mb-3">Color Selection</label>
                            <div class="space-y-4">
                                <div>
                                    <label class="flex items-center cursor-pointer">
                                        <input type="radio" name="singleColorType" value="ral" class="mr-3" onchange="toggleSingleColorInputs()">
                                        <span class="font-medium">RAL/BS Colour Selector</span>
                                    </label>
                                    <select id="singleRALColor" class="input-field w-full mt-2 hidden">
                                        <option value="">Select RAL/BS Color</option>
                                        <option value="ral-9010">RAL 9010 - Pure White</option>
                                        <option value="ral-9016">RAL 9016 - Traffic White</option>
                                        <option value="ral-7016">RAL 7016 - Anthracite Grey</option>
                                        <option value="ral-6005">RAL 6005 - Moss Green</option>
                                        <option value="ral-3020">RAL 3020 - Traffic Red</option>
                                        <option value="bs-18b25">BS 18B25 - Dark Blue</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="flex items-center cursor-pointer">
                                        <input type="radio" name="singleColorType" value="custom" class="mr-3" onchange="toggleSingleColorInputs()">
                                        <span class="font-medium">Custom Code</span>
                                    </label>
                                    <input type="text" id="singleCustomColor" class="input-field w-full mt-2 hidden" placeholder="Enter custom color code">
                                </div>
                            </div>
                        </div>

                        <!-- Tinted Glass Options -->
                        <div id="singleTintedOptions" class="mb-6 hidden">
                            <label class="block text-sm font-medium text-gray-700 mb-3">Tint Color *</label>
                            <div class="grid grid-cols-2 gap-4">
                                <label class="cursor-pointer">
                                    <input type="radio" name="singleTintColor" value="grey" class="sr-only">
                                    <div class="glass-type-option border-2 border-gray-200 rounded-lg p-4 text-center hover:border-blue-400 transition-all">
                                        <div class="w-16 h-16 bg-gray-400 rounded-lg mx-auto mb-2"></div>
                                        <p class="text-sm font-medium">Grey Tint</p>
                                    </div>
                                </label>
                                <label class="cursor-pointer">
                                    <input type="radio" name="singleTintColor" value="bronze" class="sr-only">
                                    <div class="glass-type-option border-2 border-gray-200 rounded-lg p-4 text-center hover:border-blue-400 transition-all">
                                        <div class="w-16 h-16 bg-amber-600 rounded-lg mx-auto mb-2"></div>
                                        <p class="text-sm font-medium">Bronze Tint</p>
                                    </div>
                                </label>
                            </div>
                        </div>

                        <div class="mb-6">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Polished Glass (P.A.R)</label>
                            <div class="flex gap-4">
                                <label class="flex items-center cursor-pointer">
                                    <input type="radio" name="singlePolished" value="yes" data-price="30" class="mr-2" checked disabled>
                                    <span class="text-gray-500">Yes</span>
                                </label>
                                <label class="flex items-center cursor-not-allowed">
                                    <input type="radio" name="singlePolished" value="no" data-price="0" class="mr-2" disabled>
                                    <span class="text-gray-500">No</span>
                                </label>
                            </div>
                            <p class="text-xs text-gray-500 mt-1">Required for single panel glass</p>
                        </div>

                        <div class="mb-6">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Toughened Glass</label>
                            <div class="flex gap-4">
                                <label class="flex items-center cursor-pointer">
                                    <input type="radio" name="singleToughened" value="yes" data-price="30" class="mr-2" checked disabled>
                                    <span class="text-gray-500">Yes</span>
                                </label>
                                <label class="flex items-center cursor-not-allowed">
                                    <input type="radio" name="singleToughened" value="no" data-price="0" class="mr-2" disabled>
                                    <span class="text-gray-500">No</span>
                                </label>
                            </div>
                            <p class="text-xs text-gray-500 mt-1">Required for single panel glass</p>
                        </div>

                        <!-- Hidden Cost Fields -->
                        <div class="hidden">
                            <input type="text" id="singleGlassCost" placeholder="Glass Cost">
                            <input type="text" id="singleTougheningCost" placeholder="Toughening Cost">
                            <input type="text" id="singlePolishingCost" placeholder="Polishing Cost">
                        </div>
                    </div>

                    <!-- Step 2: Shape & Dimensions -->
                    <div class="form-section">
                        <div class="flex items-center mb-4">
                            <div class="w-8 h-8 bg-blue-600 text-white rounded-full flex items-center justify-center font-bold mr-3">2</div>
                            <h3 class="text-xl font-semibold text-gray-800">Shape & Dimensions</h3>
                        </div>
                        
                        <div class="mb-6">
                            <label class="block text-sm font-medium text-gray-700 mb-3">Select Shape *</label>
                            <button type="button" id="singleShapeBtn" class="input-field w-full text-left flex items-center justify-between" onclick="openShapeModal('single')">
                                <span id="singleShapeText" class="text-gray-500">Select Shape</span>
                                <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                                </svg>
                            </button>
                            <input type="hidden" id="singleShape" required>
                            <div id="singleShapeError" class="error-message hidden">Please select a shape</div>
                            
                            <!-- Shape Details Display -->
                            <div id="singleShapeDetails" class="mt-4 p-4 bg-gray-50 rounded-lg hidden">
                                <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm">
                                    <div>
                                        <span class="font-medium text-gray-700">Shape:</span>
                                        <span id="singleSelectedShape" class="text-blue-600">-</span>
                                    </div>
                                    <div>
                                        <span class="font-medium text-gray-700">Rotation:</span>
                                        <span id="singleSelectedRotation" class="text-blue-600">0°</span>
                                    </div>
                                    <div>
                                        <span class="font-medium text-gray-700">Width A:</span>
                                        <span id="singleSelectedWidth" class="text-blue-600">-</span>
                                    </div>
                                    <div>
                                        <span class="font-medium text-gray-700">Height A:</span>
                                        <span id="singleSelectedHeight" class="text-blue-600">-</span>
                                    </div>
                                    <div id="singleLengthCDisplay" class="hidden">
                                        <span class="font-medium text-gray-700">Length C:</span>
                                        <span id="singleSelectedLengthC" class="text-blue-600">-</span>
                                    </div>
                                    <div id="singleCustomNameDisplay" class="hidden">
                                        <span class="font-medium text-gray-700">Custom Name:</span>
                                        <span id="singleSelectedCustomName" class="text-blue-600">-</span>
                                    </div>
                                    <div>
                                        <span class="font-medium text-gray-700">Reference:</span>
                                        <span id="singleShapeRef" class="text-gray-600">-</span>
                                    </div>
                                    <div>
                                        <span class="font-medium text-gray-700">Template:</span>
                                        <span id="singleTemplateFile" class="text-gray-600">-</span>
                                    </div>
                                </div>
                                <div class="border-t pt-3 mt-3">
                                    <div class="grid grid-cols-2 sm:grid-cols-4 gap-4 text-sm">
                                        <div>
                                            <span class="font-medium text-gray-700">Area:</span>
                                            <span id="singleShapeArea" class="text-green-600 font-semibold">0.000 m²</span>
                                        </div>
                                        <div>
                                            <span class="font-medium text-gray-700">Linear:</span>
                                            <span id="singleShapeLinear" class="text-green-600 font-semibold">0.000 m</span>
                                        </div>
                                        <div>
                                            <span class="font-medium text-gray-700">Weight:</span>
                                            <span id="singleShapeWeight" class="text-green-600 font-semibold">0.00 kg</span>
                                        </div>
                                        <div>
                                            <span class="font-medium text-gray-700">Total Cost:</span>
                                            <span id="singleShapeCost" class="text-green-600 font-semibold">£0.00</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>


                    </div>

                    <!-- Step 3: Optional Extras -->
                    <div class="form-section">
                        <div class="flex items-center mb-4">
                            <div class="w-8 h-8 bg-blue-600 text-white rounded-full flex items-center justify-center font-bold mr-3">3</div>
                            <h3 class="text-xl font-semibold text-gray-800">Optional Extras</h3>
                        </div>
                        
                        <!-- Corners -->
                        <div class="mb-6">
                            <label class="block text-sm font-medium text-gray-700 mb-3">Corners *</label>
                            <div class="grid grid-cols-2 sm:grid-cols-4 gap-3">
                                <label class="cursor-pointer">
                                    <input type="radio" name="singleCorners" value="straight" class="sr-only" checked>
                                    <div class="corner-option border-2 border-blue-500 bg-blue-50 rounded-lg p-3 text-center hover:border-blue-400 transition-all">
                                        <div class="w-12 h-12 bg-gray-100 rounded mx-auto mb-2 flex items-center justify-center">
                                            <img src="/views/cnr-none.jpg" alt="Straight Corners" class="w-30 h-30">
                                        </div>
                                        <p class="text-xs font-medium">Straight</p>
                                    </div>
                                </label>
                                <label class="cursor-pointer">
                                    <input type="radio" name="singleCorners" value="dubbed" class="sr-only">
                                    <div class="corner-option border-2 border-gray-200 rounded-lg p-3 text-center hover:border-blue-400 transition-all">
                                        <div class="w-12 h-12 bg-gray-100 rounded mx-auto mb-2 flex items-center justify-center">
                                            <img src="/views/cnr-dubbed.jpg" alt="dubbed Corners" class="w-30 h-30">
                                        </div>
                                        <p class="text-xs font-medium">Dubbed</p>
                                    </div>
                                </label>
                                <label class="cursor-pointer">
                                    <input type="radio" name="singleCorners" value="radius" class="sr-only">
                                    <div class="corner-option border-2 border-gray-200 rounded-lg p-3 text-center hover:border-blue-400 transition-all">
                                        <div class="w-12 h-12 bg-gray-100 rounded mx-auto mb-2 flex items-center justify-center">
                                            <img src="/views/cnr-radius.jpg" alt="radius Corners" class="w-30 h-30">
                                        </div>
                                        <p class="text-xs font-medium">Radius</p>
                                    </div>
                                </label>
                                <label class="cursor-pointer">
                                    <input type="radio" name="singleCorners" value="clipped" class="sr-only">
                                    <div class="corner-option border-2 border-gray-200 rounded-lg p-3 text-center hover:border-blue-400 transition-all">
                                        <div class="w-12 h-12 bg-gray-100 rounded mx-auto mb-2 flex items-center justify-center">
                                            <img src="/views/cnr-clipped.jpg" alt="clipped Corners" class="w-30 h-30">
                                        </div>
                                        <p class="text-xs font-medium">Clipped</p>
                                    </div>
                                </label>
                            </div>
                        </div>

                        <!-- Holes -->
                        <div class="mb-6">
                            <label class="block text-sm font-medium text-gray-700 mb-3">Holes</label>
                            <div class="grid grid-cols-1 sm:grid-cols-2 gap-3">
                                <label class="cursor-pointer">
                                    <input type="radio" name="singleHoles" value="30x30" class="sr-only" onchange="toggleSingleHoleOptions()">
                                    <div class="hole-option border-2 border-gray-200 rounded-lg p-3 text-center hover:border-blue-400 transition-all">
                                        <div class="w-12 h-12 bg-gray-100 rounded mx-auto mb-2 flex items-center justify-center">
                                            <span class="text-lg">⚬</span>
                                        </div>
                                        <p class="text-xs font-medium">4 x 30/30 in</p>
                                    </div>
                                </label>
                                <label class="cursor-pointer">
                                    <input type="radio" name="singleHoles" value="50x50" class="sr-only" onchange="toggleSingleHoleOptions()">
                                    <div class="hole-option border-2 border-gray-200 rounded-lg p-3 text-center hover:border-blue-400 transition-all">
                                        <div class="w-12 h-12 bg-gray-100 rounded mx-auto mb-2 flex items-center justify-center">
                                            <span class="text-lg">⚫</span>
                                        </div>
                                        <p class="text-xs font-medium">4 x 50/50 in</p>
                                    </div>
                                </label>
                                <label class="cursor-pointer">
                                    <input type="radio" name="singleHoles" value="60mm" class="sr-only" onchange="toggleSingleHoleOptions()">
                                    <div class="hole-option border-2 border-gray-200 rounded-lg p-3 text-center hover:border-blue-400 transition-all">
                                        <div class="w-12 h-12 bg-gray-100 rounded mx-auto mb-2 flex items-center justify-center">
                                            <span class="text-lg">●</span>
                                        </div>
                                        <p class="text-xs font-medium">1 x 60mm Centre</p>
                                    </div>
                                </label>
                                <label class="cursor-pointer">
                                    <input type="radio" name="singleHoles" value="custom" class="sr-only" onchange="toggleSingleHoleOptions()">
                                    <div class="hole-option border-2 border-gray-200 rounded-lg p-3 text-center hover:border-blue-400 transition-all">
                                        <div class="w-12 h-12 bg-gray-100 rounded mx-auto mb-2 flex items-center justify-center">
                                            <span class="text-lg">⚪</span>
                                        </div>
                                        <p class="text-xs font-medium">Custom</p>
                                    </div>
                                </label>
                            </div>
                            
                            <!-- Custom Hole Options -->
                            <div id="singleCustomHoleOptions" class="mt-4 p-4 bg-gray-50 rounded-lg hidden">
                                <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Template File</label>
                                        <div class="border-2 border-dashed border-gray-300 rounded-lg p-3 text-center hover:border-blue-400 transition-colors">
                                            <input type="file" id="singleHoleTemplate" accept=".pdf,.jpg,.jpeg,.png,.dwg" class="hidden" onchange="handleSingleHoleTemplateUpload(this)">
                                            <label for="singleHoleTemplate" class="cursor-pointer">
                                                <svg class="w-6 h-6 text-gray-400 mx-auto mb-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"/>
                                                </svg>
                                                <p class="text-xs text-gray-600">Upload template</p>
                                            </label>
                                            <div id="singleHoleTemplatePreview" class="mt-1 hidden">
                                                <div class="flex items-center justify-center gap-1 text-green-600">
                                                    <svg class="w-3 h-3" fill="currentColor" viewBox="0 0 20 20">
                                                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                                                    </svg>
                                                    <span class="text-xs" id="singleHoleTemplateFileName"></span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Number of Holes</label>
                                        <input type="number" id="singleNumberOfHoles" class="input-field w-full" min="1" max="20" placeholder="Enter number">
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Pet Flap -->
                        <div class="mb-6">
                            <label class="block text-sm font-medium text-gray-700 mb-3">Pet Flap/Vent Hole</label>
                            <div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg">
                                <div>
                                    <p class="font-medium text-gray-800">Add Pet Flap/Vent Hole</p>
                                    <p class="text-sm text-gray-600">+£50 additional cost</p>
                                </div>
                                <label class="relative inline-flex items-center cursor-pointer">
                                    <input type="checkbox" id="singlePetFlap" data-price="50" class="sr-only peer">
                                    <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
                                </label>
                            </div>
                        </div>


                    </div>
                </div>

                <!-- Double Glazed Tab -->
                <div id="doubleGlazed" class="tab-content hidden">
                    <!-- Step 1: Glass Configuration -->
                    <div class="form-section">
                        <div class="flex items-center justify-between mb-4">
                            <div class="flex items-center">
                                <div class="w-8 h-8 bg-blue-600 text-white rounded-full flex items-center justify-center font-bold mr-3">1</div>
                                <h3 class="text-xl font-semibold text-gray-800">Glass Configuration</h3>
                            </div>
                            <img src="/views/double.jpeg" alt="Double Unit" class="w-10 h-10">
                        </div>
                        
                        <div class="bg-blue-50 border border-blue-200 rounded-lg p-3 mb-6">
                            <p class="text-sm text-blue-800 font-medium">Argon gas filled as standard</p>
                        </div>
                        
                        <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 mb-6">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">External Glass *</label>
                                <button type="button" id="doubleOuterGlassBtn" class="input-field w-full text-left flex items-center justify-between" onclick="openGlassModal('doubleOuter')">
                                    <span id="doubleOuterGlassText" class="text-gray-500">Select External Glass</span>
                                    <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                                    </svg>
                                </button>
                                <input type="hidden" id="doubleOuterGlass" required>
                                <div id="doubleOuterGlassError" class="error-message hidden">Please select external glass</div>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Internal Glass *</label>
                                <button type="button" id="doubleInnerGlassBtn" class="input-field w-full text-left flex items-center justify-between" onclick="openGlassModal('doubleInner')">
                                    <span id="doubleInnerGlassText" class="text-gray-500">Select Internal Glass</span>
                                    <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                                    </svg>
                                </button>
                                <input type="hidden" id="doubleInnerGlass" required>
                                <div id="doubleInnerGlassError" class="error-message hidden">Please select internal glass</div>
                            </div>
                        </div>

                        <!-- Pattern Glass Options for External Glass -->
                        <div id="doubleOuterPatternOptions" class="mb-6 hidden">
                            <label class="block text-sm font-medium text-gray-700 mb-3">Pattern Glass Options *</label>
                            <div class="grid grid-cols-2 sm:grid-cols-4 gap-3">
                                <label class="cursor-pointer">
                                    <input type="radio" name="doubleOuterPattern" value="pattern1" class="sr-only">
                                    <div class="glass-type-option border-2 border-gray-200 rounded-lg p-3 text-center hover:border-blue-400 transition-all">
                                        <div class="w-12 h-12 bg-gray-100 rounded mx-auto mb-2 flex items-center justify-center">
                                            <span class="text-lg">▦</span>
                                        </div>
                                        <p class="text-xs font-medium">Pattern 1</p>
                                    </div>
                                </label>
                                <label class="cursor-pointer">
                                    <input type="radio" name="doubleOuterPattern" value="pattern2" class="sr-only">
                                    <div class="glass-type-option border-2 border-gray-200 rounded-lg p-3 text-center hover:border-blue-400 transition-all">
                                        <div class="w-12 h-12 bg-gray-100 rounded mx-auto mb-2 flex items-center justify-center">
                                            <span class="text-lg">◊</span>
                                        </div>
                                        <p class="text-xs font-medium">Pattern 2</p>
                                    </div>
                                </label>
                                <label class="cursor-pointer">
                                    <input type="radio" name="doubleOuterPattern" value="pattern3" class="sr-only">
                                    <div class="glass-type-option border-2 border-gray-200 rounded-lg p-3 text-center hover:border-blue-400 transition-all">
                                        <div class="w-12 h-12 bg-gray-100 rounded mx-auto mb-2 flex items-center justify-center">
                                            <span class="text-lg">≋</span>
                                        </div>
                                        <p class="text-xs font-medium">Pattern 3</p>
                                    </div>
                                </label>
                                <label class="cursor-pointer">
                                    <input type="radio" name="doubleOuterPattern" value="pattern4" class="sr-only">
                                    <div class="glass-type-option border-2 border-gray-200 rounded-lg p-3 text-center hover:border-blue-400 transition-all">
                                        <div class="w-12 h-12 bg-gray-100 rounded mx-auto mb-2 flex items-center justify-center">
                                            <span class="text-lg">⬢</span>
                                        </div>
                                        <p class="text-xs font-medium">Pattern 4</p>
                                    </div>
                                </label>
                                <!-- Additional patterns (showing 8 more for total of 12) -->
                                <label class="cursor-pointer">
                                    <input type="radio" name="doubleOuterPattern" value="pattern5" class="sr-only">
                                    <div class="glass-type-option border-2 border-gray-200 rounded-lg p-3 text-center hover:border-blue-400 transition-all">
                                        <div class="w-12 h-12 bg-gray-100 rounded mx-auto mb-2 flex items-center justify-center">
                                            <span class="text-lg">⚹</span>
                                        </div>
                                        <p class="text-xs font-medium">Pattern 5</p>
                                    </div>
                                </label>
                                <label class="cursor-pointer">
                                    <input type="radio" name="doubleOuterPattern" value="pattern6" class="sr-only">
                                    <div class="glass-type-option border-2 border-gray-200 rounded-lg p-3 text-center hover:border-blue-400 transition-all">
                                        <div class="w-12 h-12 bg-gray-100 rounded mx-auto mb-2 flex items-center justify-center">
                                            <span class="text-lg">⬟</span>
                                        </div>
                                        <p class="text-xs font-medium">Pattern 6</p>
                                    </div>
                                </label>
                                <label class="cursor-pointer">
                                    <input type="radio" name="doubleOuterPattern" value="pattern7" class="sr-only">
                                    <div class="glass-type-option border-2 border-gray-200 rounded-lg p-3 text-center hover:border-blue-400 transition-all">
                                        <div class="w-12 h-12 bg-gray-100 rounded mx-auto mb-2 flex items-center justify-center">
                                            <span class="text-lg">⬡</span>
                                        </div>
                                        <p class="text-xs font-medium">Pattern 7</p>
                                    </div>
                                </label>
                                <label class="cursor-pointer">
                                    <input type="radio" name="doubleOuterPattern" value="pattern8" class="sr-only">
                                    <div class="glass-type-option border-2 border-gray-200 rounded-lg p-3 text-center hover:border-blue-400 transition-all">
                                        <div class="w-12 h-12 bg-gray-100 rounded mx-auto mb-2 flex items-center justify-center">
                                            <span class="text-lg">◈</span>
                                        </div>
                                        <p class="text-xs font-medium">Pattern 8</p>
                                    </div>
                                </label>
                                <label class="cursor-pointer">
                                    <input type="radio" name="doubleOuterPattern" value="pattern9" class="sr-only">
                                    <div class="glass-type-option border-2 border-gray-200 rounded-lg p-3 text-center hover:border-blue-400 transition-all">
                                        <div class="w-12 h-12 bg-gray-100 rounded mx-auto mb-2 flex items-center justify-center">
                                            <span class="text-lg">⬢</span>
                                        </div>
                                        <p class="text-xs font-medium">Pattern 9</p>
                                    </div>
                                </label>
                                <label class="cursor-pointer">
                                    <input type="radio" name="doubleOuterPattern" value="pattern10" class="sr-only">
                                    <div class="glass-type-option border-2 border-gray-200 rounded-lg p-3 text-center hover:border-blue-400 transition-all">
                                        <div class="w-12 h-12 bg-gray-100 rounded mx-auto mb-2 flex items-center justify-center">
                                            <span class="text-lg">⬣</span>
                                        </div>
                                        <p class="text-xs font-medium">Pattern 10</p>
                                    </div>
                                </label>
                                <label class="cursor-pointer">
                                    <input type="radio" name="doubleOuterPattern" value="pattern11" class="sr-only">
                                    <div class="glass-type-option border-2 border-gray-200 rounded-lg p-3 text-center hover:border-blue-400 transition-all">
                                        <div class="w-12 h-12 bg-gray-100 rounded mx-auto mb-2 flex items-center justify-center">
                                            <span class="text-lg">⬤</span>
                                        </div>
                                        <p class="text-xs font-medium">Pattern 11</p>
                                    </div>
                                </label>
                                <label class="cursor-pointer">
                                    <input type="radio" name="doubleOuterPattern" value="pattern12" class="sr-only">
                                    <div class="glass-type-option border-2 border-gray-200 rounded-lg p-3 text-center hover:border-blue-400 transition-all">
                                        <div class="w-12 h-12 bg-gray-100 rounded mx-auto mb-2 flex items-center justify-center">
                                            <span class="text-lg">⬥</span>
                                        </div>
                                        <p class="text-xs font-medium">Pattern 12</p>
                                    </div>
                                </label>
                                <label class="cursor-pointer">
                                    <input type="radio" name="doubleOuterPattern" value="pattern13" class="sr-only">
                                    <div class="glass-type-option border-2 border-gray-200 rounded-lg p-3 text-center hover:border-blue-400 transition-all">
                                        <div class="w-12 h-12 bg-gray-100 rounded mx-auto mb-2 flex items-center justify-center">
                                            <span class="text-lg">⬦</span>
                                        </div>
                                        <p class="text-xs font-medium">Pattern 13</p>
                                    </div>
                                </label>
                                <label class="cursor-pointer">
                                    <input type="radio" name="doubleOuterPattern" value="pattern14" class="sr-only">
                                    <div class="glass-type-option border-2 border-gray-200 rounded-lg p-3 text-center hover:border-blue-400 transition-all">
                                        <div class="w-12 h-12 bg-gray-100 rounded mx-auto mb-2 flex items-center justify-center">
                                            <span class="text-lg">⬧</span>
                                        </div>
                                        <p class="text-xs font-medium">Pattern 14</p>
                                    </div>
                                </label>
                                <label class="cursor-pointer">
                                    <input type="radio" name="doubleOuterPattern" value="pattern15" class="sr-only">
                                    <div class="glass-type-option border-2 border-gray-200 rounded-lg p-3 text-center hover:border-blue-400 transition-all">
                                        <div class="w-12 h-12 bg-gray-100 rounded mx-auto mb-2 flex items-center justify-center">
                                            <span class="text-lg">⬨</span>
                                        </div>
                                        <p class="text-xs font-medium">Pattern 15</p>
                                    </div>
                                </label>
                                <label class="cursor-pointer">
                                    <input type="radio" name="doubleOuterPattern" value="pattern16" class="sr-only">
                                    <div class="glass-type-option border-2 border-gray-200 rounded-lg p-3 text-center hover:border-blue-400 transition-all">
                                        <div class="w-12 h-12 bg-gray-100 rounded mx-auto mb-2 flex items-center justify-center">
                                            <span class="text-lg">⬩</span>
                                        </div>
                                        <p class="text-xs font-medium">Pattern 16</p>
                                    </div>
                                </label>
                            </div>
                        </div>

                        <div class="mb-6">
                            <label class="block text-sm font-medium text-gray-700 mb-3">Spacer Bar</label>
                            <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Width *</label>
                                    <button type="button" id="doubleSpacerWidthBtn" class="input-field w-full text-left flex items-center justify-between" onclick="openSpacerModal('doubleWidth')">
                                        <span id="doubleSpacerWidthText" class="text-gray-500">Select Width</span>
                                        <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                                        </svg>
                                    </button>
                                    <input type="hidden" id="doubleSpacerWidth" required>
                                    <div id="doubleSpacerWidthError" class="error-message hidden">Please select spacer width</div>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Colour *</label>
                                    <button type="button" id="doubleSpacerColorBtn" class="input-field w-full text-left flex items-center justify-between" onclick="openSpacerModal('doubleColor')">
                                        <div class="flex items-center">
                                            <div id="doubleColorPreview" class="w-6 h-6 rounded border border-gray-300 mr-2 hidden"></div>
                                            <span id="doubleSpacerColorText" class="text-gray-500">Select Color</span>
                                        </div>
                                        <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                                        </svg>
                                    </button>
                                    <input type="hidden" id="doubleSpacerColor" name="doubleSpacerColor" required>
                                    <div id="doubleSpacerColorError" class="error-message hidden">Please select spacer color</div>
                                </div>
                            </div>
                        </div>

                        <div class="mb-6">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Toughened Glass</label>
                            <div class="flex gap-4">
                                <label class="flex items-center cursor-pointer">
                                    <input type="radio" name="doubleToughened" value="yes" data-price="30" class="mr-2" checked disabled>
                                    <span class="text-gray-500">Yes</span>
                                </label>
                                <label class="flex items-center cursor-not-allowed">
                                    <input type="radio" name="doubleToughened" value="no" data-price="0" class="mr-2" disabled>
                                    <span class="text-gray-500">No</span>
                                </label>
                            </div>
                            <p class="text-xs text-gray-500 mt-1">Required for double glazed glass</p>
                        </div>

                        <!-- Hidden Cost Fields -->
                        <div class="hidden">
                            <input type="text" id="doubleAreaCost" placeholder="Area Cost">
                            <input type="text" id="doubleTougheningCost" placeholder="Toughening Cost">
                        </div>
                    </div>

                    <!-- Step 2: Shape & Dimensions -->
                    <div class="form-section">
                        <div class="flex items-center mb-4">
                            <div class="w-8 h-8 bg-blue-600 text-white rounded-full flex items-center justify-center font-bold mr-3">2</div>
                            <h3 class="text-xl font-semibold text-gray-800">Shape & Dimensions</h3>
                        </div>
                        
                        <div class="mb-6">
                            <label class="block text-sm font-medium text-gray-700 mb-3">Select Shape *</label>
                            <button type="button" id="doubleShapeBtn" class="input-field w-full text-left flex items-center justify-between" onclick="openShapeModal('double')">
                                <span id="doubleShapeText" class="text-gray-500">Select Shape</span>
                                <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                                </svg>
                            </button>
                            <input type="hidden" id="doubleShape" required>
                            <div id="doubleShapeError" class="error-message hidden">Please select a shape</div>
                            
                            <!-- Shape Details Display -->
                            <div id="doubleShapeDetails" class="mt-4 p-4 bg-gray-50 rounded-lg hidden">
                                <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm">
                                    <div>
                                        <span class="font-medium text-gray-700">Shape:</span>
                                        <span id="doubleSelectedShape" class="text-blue-600">-</span>
                                    </div>
                                    <div>
                                        <span class="font-medium text-gray-700">Rotation:</span>
                                        <span id="doubleSelectedRotation" class="text-blue-600">0°</span>
                                    </div>
                                    <div>
                                        <span class="font-medium text-gray-700">Width A:</span>
                                        <span id="doubleSelectedWidth" class="text-blue-600">-</span>
                                    </div>
                                    <div>
                                        <span class="font-medium text-gray-700">Height A:</span>
                                        <span id="doubleSelectedHeight" class="text-blue-600">-</span>
                                    </div>
                                    <div id="doubleLengthCDisplay" class="hidden">
                                        <span class="font-medium text-gray-700">Length C:</span>
                                        <span id="doubleSelectedLengthC" class="text-blue-600">-</span>
                                    </div>
                                    <div id="doubleCustomNameDisplay" class="hidden">
                                        <span class="font-medium text-gray-700">Custom Name:</span>
                                        <span id="doubleSelectedCustomName" class="text-blue-600">-</span>
                                    </div>
                                    <div>
                                        <span class="font-medium text-gray-700">Reference:</span>
                                        <span id="doubleShapeRef" class="text-gray-600">-</span>
                                    </div>
                                    <div>
                                        <span class="font-medium text-gray-700">Template:</span>
                                        <span id="doubleTemplateFile" class="text-gray-600">-</span>
                                    </div>
                                </div>
                                <div class="border-t pt-3 mt-3">
                                    <div class="grid grid-cols-2 sm:grid-cols-4 gap-4 text-sm">
                                        <div>
                                            <span class="font-medium text-gray-700">Area:</span>
                                            <span id="doubleShapeArea" class="text-green-600 font-semibold">0.000 m²</span>
                                        </div>
                                        <div>
                                            <span class="font-medium text-gray-700">Linear:</span>
                                            <span id="doubleShapeLinear" class="text-green-600 font-semibold">0.000 m</span>
                                        </div>
                                        <div>
                                            <span class="font-medium text-gray-700">Weight:</span>
                                            <span id="doubleShapeWeight" class="text-green-600 font-semibold">0.00 kg</span>
                                        </div>
                                        <div>
                                            <span class="font-medium text-gray-700">Total Cost:</span>
                                            <span id="doubleShapeCost" class="text-green-600 font-semibold">£0.00</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>


                    </div>

                    <!-- Step 3: Optional Extras -->
                    <div class="form-section">
                        <div class="flex items-center mb-4">
                            <div class="w-8 h-8 bg-blue-600 text-white rounded-full flex items-center justify-center font-bold mr-3">3</div>
                            <h3 class="text-xl font-semibold text-gray-800">Optional Extras</h3>
                        </div>
                        
                        <div class="mb-6">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Additional Features</label>
                            <select id="doubleExtras" class="input-field w-full">
                                <option value="none" data-price="0">None</option>
                                <option value="georgian" data-price="57.50">18mm White Georgian</option>
                                <option value="lead-square" data-price="62.50">9mm Square Lead</option>
                                <option value="lead-diamond" data-price="70">9mm Diamond Lead</option>
                            </select>
                        </div>

                        <div class="mb-6">
                            <label class="block text-sm font-medium text-gray-700 mb-3">Pet Flap/Vent Hole</label>
                            <div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg">
                                <div>
                                    <p class="font-medium text-gray-800">Add Pet Flap/Vent Hole</p>
                                    <p class="text-sm text-gray-600">+£50 additional cost</p>
                                </div>
                                <label class="relative inline-flex items-center cursor-pointer">
                                    <input type="checkbox" id="doublePetFlap" data-price="50" class="sr-only peer">
                                    <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
                                </label>
                            </div>
                        </div>


                    </div>
                </div>

                <!-- Triple Glazed Tab -->
                <div id="tripleGlazed" class="tab-content hidden">
                    <!-- Step 1: Glass Configuration -->
                    <div class="form-section">
                        <div class="flex items-center justify-between mb-4">
                            <div class="flex items-center">
                                <div class="w-8 h-8 bg-blue-600 text-white rounded-full flex items-center justify-center font-bold mr-3">1</div>
                                <h3 class="text-xl font-semibold text-gray-800">Glass Configuration</h3>
                            </div>
                            <img src="/views/triple.jpeg" alt="Triple Unit" class="w-10 h-10">
                        </div>
                        
                        <div class="bg-blue-50 border border-blue-200 rounded-lg p-3 mb-6">
                            <p class="text-sm text-blue-800 font-medium">Argon gas filled as standard</p>
                        </div>
                        
                        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 mb-6">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">External Glass *</label>
                                <button type="button" id="tripleOuterGlassBtn" class="input-field w-full text-left flex items-center justify-between" onclick="openGlassModal('tripleOuter')">
                                    <span id="tripleOuterGlassText" class="text-gray-500">Select External Glass</span>
                                    <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                                    </svg>
                                </button>
                                <input type="hidden" id="tripleOuterGlass" required>
                                <div id="tripleOuterGlassError" class="error-message hidden">Please select external glass</div>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Centre Glass *</label>
                                <button type="button" id="tripleCentreGlassBtn" class="input-field w-full text-left flex items-center justify-between" onclick="openGlassModal('tripleCentre')">
                                    <span id="tripleCentreGlassText" class="text-gray-500">Select Centre Glass</span>
                                    <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                                    </svg>
                                </button>
                                <input type="hidden" id="tripleCentreGlass" required>
                                <div id="tripleCentreGlassError" class="error-message hidden">Please select centre glass</div>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Internal Glass *</label>
                                <button type="button" id="tripleInnerGlassBtn" class="input-field w-full text-left flex items-center justify-between" onclick="openGlassModal('tripleInner')">
                                    <span id="tripleInnerGlassText" class="text-gray-500">Select Internal Glass</span>
                                    <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                                    </svg>
                                </button>
                                <input type="hidden" id="tripleInnerGlass" required>
                                <div id="tripleInnerGlassError" class="error-message hidden">Please select internal glass</div>
                            </div>
                        </div>

                        <!-- Pattern Glass Options for External Glass -->
                        <div id="tripleOuterPatternOptions" class="mb-6 hidden">
                            <label class="block text-sm font-medium text-gray-700 mb-3">Pattern Glass Options *</label>
                            <div class="grid grid-cols-2 sm:grid-cols-4 gap-3">
                                <label class="cursor-pointer">
                                    <input type="radio" name="tripleOuterPattern" value="pattern1" class="sr-only">
                                    <div class="glass-type-option border-2 border-gray-200 rounded-lg p-3 text-center hover:border-blue-400 transition-all">
                                        <div class="w-12 h-12 bg-gray-100 rounded mx-auto mb-2 flex items-center justify-center">
                                            <span class="text-lg">▦</span>
                                        </div>
                                        <p class="text-xs font-medium">Pattern 1</p>
                                    </div>
                                </label>
                                <label class="cursor-pointer">
                                    <input type="radio" name="tripleOuterPattern" value="pattern2" class="sr-only">
                                    <div class="glass-type-option border-2 border-gray-200 rounded-lg p-3 text-center hover:border-blue-400 transition-all">
                                        <div class="w-12 h-12 bg-gray-100 rounded mx-auto mb-2 flex items-center justify-center">
                                            <span class="text-lg">◊</span>
                                        </div>
                                        <p class="text-xs font-medium">Pattern 2</p>
                                    </div>
                                </label>
                                <label class="cursor-pointer">
                                    <input type="radio" name="tripleOuterPattern" value="pattern3" class="sr-only">
                                    <div class="glass-type-option border-2 border-gray-200 rounded-lg p-3 text-center hover:border-blue-400 transition-all">
                                        <div class="w-12 h-12 bg-gray-100 rounded mx-auto mb-2 flex items-center justify-center">
                                            <span class="text-lg">≋</span>
                                        </div>
                                        <p class="text-xs font-medium">Pattern 3</p>
                                    </div>
                                </label>
                                <label class="cursor-pointer">
                                    <input type="radio" name="tripleOuterPattern" value="pattern4" class="sr-only">
                                    <div class="glass-type-option border-2 border-gray-200 rounded-lg p-3 text-center hover:border-blue-400 transition-all">
                                        <div class="w-12 h-12 bg-gray-100 rounded mx-auto mb-2 flex items-center justify-center">
                                            <span class="text-lg">⬢</span>
                                        </div>
                                        <p class="text-xs font-medium">Pattern 4</p>
                                    </div>
                                </label>
                                <label class="cursor-pointer">
                                    <input type="radio" name="tripleOuterPattern" value="pattern5" class="sr-only">
                                    <div class="glass-type-option border-2 border-gray-200 rounded-lg p-3 text-center hover:border-blue-400 transition-all">
                                        <div class="w-12 h-12 bg-gray-100 rounded mx-auto mb-2 flex items-center justify-center">
                                            <span class="text-lg">⚹</span>
                                        </div>
                                        <p class="text-xs font-medium">Pattern 5</p>
                                    </div>
                                </label>
                                <label class="cursor-pointer">
                                    <input type="radio" name="tripleOuterPattern" value="pattern6" class="sr-only">
                                    <div class="glass-type-option border-2 border-gray-200 rounded-lg p-3 text-center hover:border-blue-400 transition-all">
                                        <div class="w-12 h-12 bg-gray-100 rounded mx-auto mb-2 flex items-center justify-center">
                                            <span class="text-lg">⬟</span>
                                        </div>
                                        <p class="text-xs font-medium">Pattern 6</p>
                                    </div>
                                </label>
                                <label class="cursor-pointer">
                                    <input type="radio" name="tripleOuterPattern" value="pattern7" class="sr-only">
                                    <div class="glass-type-option border-2 border-gray-200 rounded-lg p-3 text-center hover:border-blue-400 transition-all">
                                        <div class="w-12 h-12 bg-gray-100 rounded mx-auto mb-2 flex items-center justify-center">
                                            <span class="text-lg">⬡</span>
                                        </div>
                                        <p class="text-xs font-medium">Pattern 7</p>
                                    </div>
                                </label>
                                <label class="cursor-pointer">
                                    <input type="radio" name="tripleOuterPattern" value="pattern8" class="sr-only">
                                    <div class="glass-type-option border-2 border-gray-200 rounded-lg p-3 text-center hover:border-blue-400 transition-all">
                                        <div class="w-12 h-12 bg-gray-100 rounded mx-auto mb-2 flex items-center justify-center">
                                            <span class="text-lg">◈</span>
                                        </div>
                                        <p class="text-xs font-medium">Pattern 8</p>
                                    </div>
                                </label>
                                <label class="cursor-pointer">
                                    <input type="radio" name="tripleOuterPattern" value="pattern9" class="sr-only">
                                    <div class="glass-type-option border-2 border-gray-200 rounded-lg p-3 text-center hover:border-blue-400 transition-all">
                                        <div class="w-12 h-12 bg-gray-100 rounded mx-auto mb-2 flex items-center justify-center">
                                            <span class="text-lg">⬢</span>
                                        </div>
                                        <p class="text-xs font-medium">Pattern 9</p>
                                    </div>
                                </label>
                                <label class="cursor-pointer">
                                    <input type="radio" name="tripleOuterPattern" value="pattern10" class="sr-only">
                                    <div class="glass-type-option border-2 border-gray-200 rounded-lg p-3 text-center hover:border-blue-400 transition-all">
                                        <div class="w-12 h-12 bg-gray-100 rounded mx-auto mb-2 flex items-center justify-center">
                                            <span class="text-lg">⬣</span>
                                        </div>
                                        <p class="text-xs font-medium">Pattern 10</p>
                                    </div>
                                </label>
                                <label class="cursor-pointer">
                                    <input type="radio" name="tripleOuterPattern" value="pattern11" class="sr-only">
                                    <div class="glass-type-option border-2 border-gray-200 rounded-lg p-3 text-center hover:border-blue-400 transition-all">
                                        <div class="w-12 h-12 bg-gray-100 rounded mx-auto mb-2 flex items-center justify-center">
                                            <span class="text-lg">⬤</span>
                                        </div>
                                        <p class="text-xs font-medium">Pattern 11</p>
                                    </div>
                                </label>
                                <label class="cursor-pointer">
                                    <input type="radio" name="tripleOuterPattern" value="pattern12" class="sr-only">
                                    <div class="glass-type-option border-2 border-gray-200 rounded-lg p-3 text-center hover:border-blue-400 transition-all">
                                        <div class="w-12 h-12 bg-gray-100 rounded mx-auto mb-2 flex items-center justify-center">
                                            <span class="text-lg">⬥</span>
                                        </div>
                                        <p class="text-xs font-medium">Pattern 12</p>
                                    </div>
                                </label>
                                <label class="cursor-pointer">
                                    <input type="radio" name="tripleOuterPattern" value="pattern13" class="sr-only">
                                    <div class="glass-type-option border-2 border-gray-200 rounded-lg p-3 text-center hover:border-blue-400 transition-all">
                                        <div class="w-12 h-12 bg-gray-100 rounded mx-auto mb-2 flex items-center justify-center">
                                            <span class="text-lg">⬦</span>
                                        </div>
                                        <p class="text-xs font-medium">Pattern 13</p>
                                    </div>
                                </label>
                                <label class="cursor-pointer">
                                    <input type="radio" name="tripleOuterPattern" value="pattern14" class="sr-only">
                                    <div class="glass-type-option border-2 border-gray-200 rounded-lg p-3 text-center hover:border-blue-400 transition-all">
                                        <div class="w-12 h-12 bg-gray-100 rounded mx-auto mb-2 flex items-center justify-center">
                                            <span class="text-lg">⬧</span>
                                        </div>
                                        <p class="text-xs font-medium">Pattern 14</p>
                                    </div>
                                </label>
                                <label class="cursor-pointer">
                                    <input type="radio" name="tripleOuterPattern" value="pattern15" class="sr-only">
                                    <div class="glass-type-option border-2 border-gray-200 rounded-lg p-3 text-center hover:border-blue-400 transition-all">
                                        <div class="w-12 h-12 bg-gray-100 rounded mx-auto mb-2 flex items-center justify-center">
                                            <span class="text-lg">⬨</span>
                                        </div>
                                        <p class="text-xs font-medium">Pattern 15</p>
                                    </div>
                                </label>
                                <label class="cursor-pointer">
                                    <input type="radio" name="tripleOuterPattern" value="pattern16" class="sr-only">
                                    <div class="glass-type-option border-2 border-gray-200 rounded-lg p-3 text-center hover:border-blue-400 transition-all">
                                        <div class="w-12 h-12 bg-gray-100 rounded mx-auto mb-2 flex items-center justify-center">
                                            <span class="text-lg">⬩</span>
                                        </div>
                                        <p class="text-xs font-medium">Pattern 16</p>
                                    </div>
                                </label>
                            </div>
                        </div>

                        <div class="mb-6">
                            <label class="block text-sm font-medium text-gray-700 mb-3">Spacer Bars</label>
                            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Spacer Bar Width *</label>
                                    <button type="button" id="tripleSpacerWidthBtn" class="input-field w-full text-left flex items-center justify-between" onclick="openSpacerModal('tripleWidth')">
                                        <span id="tripleSpacerWidthText" class="text-gray-500">Select Width</span>
                                        <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                                        </svg>
                                    </button>
                                    <input type="hidden" id="tripleSpacerWidth" required>
                                    <div id="tripleSpacerWidthError" class="error-message hidden">Please select spacer width</div>
                                </div>
                                <div class="lg:col-span-2">
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Colour *</label>
                                    <button type="button" id="tripleSpacerColorBtn" class="input-field w-full text-left flex items-center justify-between" onclick="openSpacerModal('tripleColor')">
                                        <div class="flex items-center">
                                            <div id="tripleColorPreview" class="w-6 h-6 rounded border border-gray-300 mr-2 hidden"></div>
                                            <span id="tripleSpacerColorText" class="text-gray-500">Select Color</span>
                                        </div>
                                        <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                                        </svg>
                                    </button>
                                    <input type="hidden" id="tripleSpacerColor" name="tripleSpacerColor" required>
                                    <div id="tripleSpacerColorError" class="error-message hidden">Please select spacer color</div>
                                </div>
                            </div>
                        </div>

                        <div class="mb-6">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Toughened Glass</label>
                            <div class="flex gap-4">
                                <label class="flex items-center cursor-pointer">
                                    <input type="radio" name="tripleToughened" value="yes" data-price="30" class="mr-2" checked disabled>
                                    <span class="text-gray-500">Yes</span>
                                </label>
                                <label class="flex items-center cursor-not-allowed">
                                    <input type="radio" name="tripleToughened" value="no" data-price="0" class="mr-2" disabled>
                                    <span class="text-gray-500">No</span>
                                </label>
                            </div>
                            <p class="text-xs text-gray-500 mt-1">Required for triple glazed glass</p>
                        </div>

                        <!-- Hidden Cost Fields -->
                        <div class="hidden">
                            <input type="text" id="tripleAreaCost" placeholder="Area Cost">
                            <input type="text" id="tripleTougheningCost" placeholder="Toughening Cost">
                        </div>
                    </div>

                    <!-- Step 2: Shape & Dimensions -->
                    <div class="form-section">
                        <div class="flex items-center mb-4">
                            <div class="w-8 h-8 bg-blue-600 text-white rounded-full flex items-center justify-center font-bold mr-3">2</div>
                            <h3 class="text-xl font-semibold text-gray-800">Shape & Dimensions</h3>
                        </div>
                        
                        <div class="mb-6">
                            <label class="block text-sm font-medium text-gray-700 mb-3">Select Shape *</label>
                            <button type="button" id="tripleShapeBtn" class="input-field w-full text-left flex items-center justify-between" onclick="openShapeModal('triple')">
                                <span id="tripleShapeText" class="text-gray-500">Select Shape</span>
                                <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                                </svg>
                            </button>
                            <input type="hidden" id="tripleShape" required>
                            <div id="tripleShapeError" class="error-message hidden">Please select a shape</div>
                            
                            <!-- Shape Details Display -->
                            <div id="tripleShapeDetails" class="mt-4 p-4 bg-gray-50 rounded-lg hidden">
                                <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm">
                                    <div>
                                        <span class="font-medium text-gray-700">Shape:</span>
                                        <span id="tripleSelectedShape" class="text-blue-600">-</span>
                                    </div>
                                    <div>
                                        <span class="font-medium text-gray-700">Rotation:</span>
                                        <span id="tripleSelectedRotation" class="text-blue-600">0°</span>
                                    </div>
                                    <div>
                                        <span class="font-medium text-gray-700">Width A:</span>
                                        <span id="tripleSelectedWidth" class="text-blue-600">-</span>
                                    </div>
                                    <div>
                                        <span class="font-medium text-gray-700">Height A:</span>
                                        <span id="tripleSelectedHeight" class="text-blue-600">-</span>
                                    </div>
                                    <div id="tripleLengthCDisplay" class="hidden">
                                        <span class="font-medium text-gray-700">Length C:</span>
                                        <span id="tripleSelectedLengthC" class="text-blue-600">-</span>
                                    </div>
                                    <div id="tripleCustomNameDisplay" class="hidden">
                                        <span class="font-medium text-gray-700">Custom Name:</span>
                                        <span id="tripleSelectedCustomName" class="text-blue-600">-</span>
                                    </div>
                                    <div>
                                        <span class="font-medium text-gray-700">Reference:</span>
                                        <span id="tripleShapeRef" class="text-gray-600">-</span>
                                    </div>
                                    <div>
                                        <span class="font-medium text-gray-700">Template:</span>
                                        <span id="tripleTemplateFile" class="text-gray-600">-</span>
                                    </div>
                                </div>
                                <div class="border-t pt-3 mt-3">
                                    <div class="grid grid-cols-2 sm:grid-cols-4 gap-4 text-sm">
                                        <div>
                                            <span class="font-medium text-gray-700">Area:</span>
                                            <span id="tripleShapeArea" class="text-green-600 font-semibold">0.000 m²</span>
                                        </div>
                                        <div>
                                            <span class="font-medium text-gray-700">Linear:</span>
                                            <span id="tripleShapeLinear" class="text-green-600 font-semibold">0.000 m</span>
                                        </div>
                                        <div>
                                            <span class="font-medium text-gray-700">Weight:</span>
                                            <span id="tripleShapeWeight" class="text-green-600 font-semibold">0.00 kg</span>
                                        </div>
                                        <div>
                                            <span class="font-medium text-gray-700">Total Cost:</span>
                                            <span id="tripleShapeCost" class="text-green-600 font-semibold">£0.00</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>


                    </div>

                    <!-- Step 3: Optional Extras -->
                    <div class="form-section">
                        <div class="flex items-center mb-4">
                            <div class="w-8 h-8 bg-blue-600 text-white rounded-full flex items-center justify-center font-bold mr-3">3</div>
                            <h3 class="text-xl font-semibold text-gray-800">Optional Extras</h3>
                        </div>
                        
                        <div class="mb-6">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Additional Features</label>
                            <select id="tripleExtras" class="input-field w-full">
                                <option value="none" data-price="0">None</option>
                                <option value="georgian" data-price="57.50">18mm White Georgian</option>
                                <option value="lead-square" data-price="62.50">9mm Square Lead</option>
                                <option value="lead-diamond" data-price="70">9mm Diamond Lead</option>
                            </select>
                        </div>

                        <div class="mb-6">
                            <label class="block text-sm font-medium text-gray-700 mb-3">Pet Flap/Vent Hole</label>
                            <div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg">
                                <div>
                                    <p class="font-medium text-gray-800">Add Pet Flap/Vent Hole</p>
                                    <p class="text-sm text-gray-600">+£50 additional cost</p>
                                </div>
                                <label class="relative inline-flex items-center cursor-pointer">
                                    <input type="checkbox" id="triplePetFlap" data-price="50" class="sr-only peer">
                                    <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
                                </label>
                            </div>
                        </div>


                    </div>
                </div>

                <div class="text-center mt-8">
                    <button id="addToCart" class="btn-primary text-lg px-8 py-4">Add to Cart</button>
                </div>
            </div>

            <!-- Configuration Summary & Cart
            <div class="xl:col-span-1">
                <div class="price-display mb-6">
                    <h3 class="text-2xl font-bold mb-4">Configuration Summary</h3>
                    <div class="space-y-2">
                        <div class="text-lg font-bold">Ready to Add to Cart</div>
                        <div class="text-sm opacity-90">
                            <p>Complete your selection below</p>
                        </div>
                    </div>
                </div>

                <div class="bg-white rounded-lg shadow-lg overflow-hidden">
                    <div class="cart-header">
                        <h3 class="text-xl font-bold">Shopping Cart</h3>
                        <p class="text-sm opacity-90 mt-1">Review your glass orders</p>
                    </div>
                    <div class="px-6 pb-6">
                        <div id="cartItems">
                            <div class="cart-empty">
                                <svg fill="currentColor" viewBox="0 0 20 20">
                                    <path d="M3 1a1 1 0 000 2h1.22l.305 1.222a.997.997 0 00.01.042l1.358 5.43-.893.892C3.74 11.846 4.632 14 6.414 14H15a1 1 0 000-2H6.414l1-1H14a1 1 0 00.894-.553l3-6A1 1 0 0017 3H6.28l-.31-1.243A1 1 0 005 1H3zM16 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM6.5 18a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"/>
                                </svg>
                                <p class="text-lg font-medium">Your cart is empty</p>
                                <p class="text-sm mt-2">Add some glass units to get started</p>
                            </div>
                        </div>
                        <div id="cartSummary" class="hidden border-t pt-6 mt-6">
                            <div class="space-y-3">
                                <div class="flex justify-between text-lg font-bold">
                                    <span>Total Items:</span>
                                    <span class="text-blue-600"><span id="cartItemCount">0</span> units</span>
                                </div>
                            </div>
                            <button class="w-full mt-6 bg-green-600 hover:bg-green-700 text-white font-semibold py-3 px-4 rounded-lg transition-colors duration-200">
                                Request Quote
                            </button>
                        </div>
                    </div>
                </div>
            </div>-->
        </div>
    </div>

    <!-- Shape Selection Modal -->
    <div id="shapeModal" class="shape-modal hidden">
        <div class="shape-modal-content max-w-6xl">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-xl font-bold text-gray-800" id="shapeModalTitle">Select Shape</h3>
                <button onclick="closeShapeModal()" class="text-gray-500 hover:text-gray-700">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                    </svg>
                </button>
            </div>
            
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                <!-- Left Side: Shape Selection -->
                <div>
                    <h4 class="text-lg font-semibold mb-4">Available Shapes</h4>
                    <div class="grid grid-cols-2 sm:grid-cols-3 gap-3 max-h-96 overflow-y-auto" id="shapeOptionsContainer">
                        <!-- Shape options will be populated dynamically -->
                    </div>
                </div>

                <!-- Right Side: Shape Configuration -->
                <div id="shapeConfigPanel" class="hidden">
                    <h4 class="text-lg font-semibold mb-4">Shape Configuration</h4>
                    
                    <!-- Shape Preview -->
                    <div class="mb-6">
                        <div class="bg-gray-100 rounded-lg p-4 text-center">
                            <div id="shapePreview" class="text-6xl mb-2">⬜</div>
                            <p id="shapePreviewName" class="font-medium text-gray-800">Square/Rectangle</p>
                        </div>
                    </div>

                    <!-- Sub-Shape Rotation -->
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Rotation</label>
                        <div class="grid grid-cols-4 gap-2">
                            <button type="button" class="rotation-btn border-2 border-gray-200 rounded-lg p-2 text-center hover:border-blue-400 transition-all" data-rotation="0">
                                <div class="text-2xl mb-1" id="rotation0">⬜</div>
                                <div class="text-xs">0°</div>
                            </button>
                            <button type="button" class="rotation-btn border-2 border-gray-200 rounded-lg p-2 text-center hover:border-blue-400 transition-all" data-rotation="90">
                                <div class="text-2xl mb-1" id="rotation90">⬜</div>
                                <div class="text-xs">90°</div>
                            </button>
                            <button type="button" class="rotation-btn border-2 border-gray-200 rounded-lg p-2 text-center hover:border-blue-400 transition-all" data-rotation="180">
                                <div class="text-2xl mb-1" id="rotation180">⬜</div>
                                <div class="text-xs">180°</div>
                            </button>
                            <button type="button" class="rotation-btn border-2 border-gray-200 rounded-lg p-2 text-center hover:border-blue-400 transition-all" data-rotation="270">
                                <div class="text-2xl mb-1" id="rotation270">⬜</div>
                                <div class="text-xs">270°</div>
                            </button>
                        </div>
                        <input type="hidden" id="shapeRotation" value="0">
                    </div>

                    <!-- Dimensions -->
                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Width A (mm) *</label>
                            <input type="number" id="shapeWidthA" class="input-field w-full" min="100" max="2800" required>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Height A (mm) *</label>
                            <input type="number" id="shapeHeightA" class="input-field w-full" min="100" max="2800" required>
                        </div>
                    </div>

                    <!-- Length C (for specific shapes) -->
                    <div id="shapeLengthContainer" class="mb-4 hidden">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Length C (mm) *</label>
                        <input type="number" id="shapeLengthC" class="input-field w-full" min="100" max="2800">
                    </div>

                    <!-- Custom Shape Name -->
                    <div id="customShapeContainer" class="mb-4 hidden">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Custom Shape Name *</label>
                        <input type="text" id="customShapeName" class="input-field w-full" placeholder="Enter custom shape name">
                    </div>

                    <!-- Template File Upload -->
                    <div id="templateUploadContainer" class="mb-4 hidden">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Template File</label>
                        <div class="border-2 border-dashed border-gray-300 rounded-lg p-4 text-center hover:border-blue-400 transition-colors">
                            <input type="file" id="templateFile" accept=".pdf,.jpg,.jpeg,.png,.dwg" class="hidden" onchange="handleTemplateUpload(this)">
                            <label for="templateFile" class="cursor-pointer">
                                <svg class="w-8 h-8 text-gray-400 mx-auto mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"/>
                                </svg>
                                <p class="text-sm text-gray-600">Upload template file</p>
                            </label>
                            <div id="templatePreview" class="mt-2 hidden">
                                <div class="flex items-center justify-center gap-2 text-green-600">
                                    <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                                    </svg>
                                    <span class="text-xs" id="templateFileName"></span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Reference -->
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Reference</label>
                        <input type="text" id="shapeReference" class="input-field w-full" placeholder="Optional reference">
                    </div>

                    <!-- Calculated Values -->
                    <div class="bg-gray-50 rounded-lg p-4 space-y-2">
                        <div class="flex justify-between text-sm">
                            <span class="font-medium">Area (m²):</span>
                            <span id="calculatedArea" class="text-blue-600">0.000</span>
                        </div>
                        <div class="flex justify-between text-sm">
                            <span class="font-medium">Linear Metre (m):</span>
                            <span id="calculatedLinear" class="text-blue-600">0.000</span>
                        </div>
                        <div class="flex justify-between text-sm">
                            <span class="font-medium">Weight (kg):</span>
                            <span id="calculatedWeight" class="text-blue-600">0.00</span>
                        </div>
                        <div class="border-t pt-2 mt-2">
                            <div class="flex justify-between text-sm">
                                <span class="font-medium">Glass Cost (£):</span>
                                <span id="calculatedGlassCost" class="text-green-600">0.00</span>
                            </div>
                            <div class="flex justify-between text-sm">
                                <span class="font-medium">Shape Cost (£):</span>
                                <span id="calculatedShapeCost" class="text-green-600">0.00</span>
                            </div>
                            <div class="flex justify-between text-sm">
                                <span class="font-medium">Oversize Cost (£):</span>
                                <span id="calculatedOversizeCost" class="text-green-600">0.00</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="flex justify-end gap-3 mt-6 pt-4 border-t">
                <button onclick="closeShapeModal()" class="px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors">
                    Cancel
                </button>
                <button onclick="selectShapeOption()" id="selectShapeBtn" class="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:bg-gray-400" disabled>
                    Select Shape
                </button>
            </div>
        </div>
    </div>

    <!-- Glass Selection Modal -->
    <div id="glassModal" class="shape-modal hidden">
        <div class="shape-modal-content max-w-4xl">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-xl font-bold text-gray-800" id="glassModalTitle">Select Glass Type</h3>
                <button onclick="closeGlassModal()" class="text-gray-500 hover:text-gray-700">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                    </svg>
                </button>
            </div>
            
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 max-h-96 overflow-y-auto" id="glassOptionsContainer">
                <!-- Glass options will be populated dynamically -->
            </div>

            <div class="flex justify-end gap-3 mt-6 pt-4 border-t">
                <button onclick="closeGlassModal()" class="px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors">
                    Cancel
                </button>
                <button onclick="selectGlassOption()" class="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors">
                    Select
                </button>
            </div>
        </div>
    </div>

    <!-- Spacer Bar Modal -->
    <div id="spacerModal" class="shape-modal hidden">
        <div class="shape-modal-content max-w-3xl">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-xl font-bold text-gray-800" id="spacerModalTitle">Select Spacer Bar</h3>
                <button onclick="closeSpacerModal()" class="text-gray-500 hover:text-gray-700">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                    </svg>
                </button>
            </div>
            
            <div id="spacerOptionsContainer">
                <!-- Spacer options will be populated dynamically -->
            </div>

            <div class="flex justify-end gap-3 mt-6 pt-4 border-t">
                <button onclick="closeSpacerModal()" class="px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors">
                    Cancel
                </button>
                <button onclick="selectSpacerOption()" class="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors">
                    Select
                </button>
            </div>
        </div>
    </div>

    <!-- Success Popup -->
    <div id="successPopup" class="success-popup">
        <div class="popup-content">
            <svg class="popup-icon" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
            </svg>
            <div class="popup-text">
                <div class="popup-title">Success!</div>
                <div class="popup-message">Item added to cart successfully</div>
            </div>
        </div>
    </div>

    <script src="final.js"></script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'98485b54978a9380',t:'MTc1ODc4MDYwOS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
